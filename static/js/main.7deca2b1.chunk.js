(this.webpackJsonpreactcrud=this.webpackJsonpreactcrud||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),s=n.n(r),i=n(50),o=n(19),l=n(35);n(79),n(69),n(78);l.a.initializeApp({apiKey:"AIzaSyDjw4aU33bATYcGf_2ByD9Asc23Vbs8Sbo",authDomain:"react-base-626cd.firebaseapp.com",projectId:"react-base-626cd",storageBucket:"react-base-626cd.appspot.com",messagingSenderId:"979039453640",appId:"1:979039453640:web:043007dc634265a53e80fd",measurementId:"G-1NZS1XJBN2"});var d=l.a.firestore(),j=(l.a.auth(),l.a.storage(),l.a.firestore.FieldValue.serverTimestamp),u=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!0),l=Object(o.a)(s,2),j=l[0],u=l[1],b=Object(a.useState)(null),p=Object(o.a)(b,2),h=p[0],O=p[1];return Object(a.useEffect)((function(){d.collection("persons").orderBy("createdAt").onSnapshot((function(e){var t=[];e.docs.forEach((function(e){e.data().createdAt&&t.push(Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id}))})),u(!1),r(t),O(null)}),(function(e){console.log(e.message),r(null),O("could not fetch the data")}))}),[e]),{data:c,isPending:j,error:h}},b=n(39),p=n.n(b),h=n(47),O=function(e,t){var n=Object(a.useState)(null),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),l=Object(o.a)(i,2),j=l[0],u=l[1],b=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0);try{d.collection("persons").add(t)}catch(n){s(n.message)}finally{u(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{error:r,deleteDoc:function(){var n=d.collection(e).doc(t);try{return n.delete()}catch(a){s(a.message)}},update:function(){var t=Object(h.a)(p.a.mark((function t(n,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n,a),u(!0);try{d.collection(e).doc(n).update({name:a})}catch(c){s(c.message)}finally{u(!1)}case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),loading:j,add:b}},x=n(109),m=n(110),f=n(24),v=n(11),g=n(4),y=function(e){var t=Object(v.f)().id,n=u("http://localhost:3000/person/"+t),c=n.data,r=n.error,s=n.isPending,i=Object(a.useState)(e.data),l=Object(o.a)(i,2),d=l[0],j=l[1],b=O("persons",t),p=b.deleteDoc,h=b.update;return Object(g.jsxs)("div",{className:"person-details",children:[s&&Object(g.jsx)("div",{children:"Loading..."}),r&&Object(g.jsx)("div",{children:r}),c&&Object(g.jsxs)("div",{className:"person-single",children:[Object(g.jsx)("h2",{children:"Person name: "}),Object(g.jsx)(x.a,{variant:"outlined",size:"small",placeholder:c.name,onChange:function(e){j(e.target.value)}}),Object(g.jsx)(m.a,{variant:"contained",onClick:function(){h(t,d)},children:"Edit"}),Object(g.jsx)(f.b,{to:"/",children:Object(g.jsx)(m.a,{variant:"contained",onClick:function(){p(t)},children:"Delete"})}),Object(g.jsxs)("h4",{children:["Person ID: '",t,"'"]})]})]})},S=function(e){var t=e.person,n=Object(a.useState)(t.name),c=Object(o.a)(n,2),r=c[0],s=(c[1],O("persons",t.id));s.deleteDoc,s.update;return Object(g.jsxs)("div",{className:"person-preview",children:[Object(g.jsx)(x.a,{variant:"outlined",size:"small",value:r}),Object(g.jsxs)(f.b,{to:"/person/".concat(t.id),children:[Object(g.jsx)(m.a,{variant:"contained",children:"Select"}),Object(g.jsx)("div",{style:{display:"none"},children:Object(g.jsx)(y,{data:t},t.id)})]})]})},N=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],r=O("").add;return Object(g.jsxs)("div",{children:["ADD: ",Object(g.jsx)(x.a,{label:"Person name...",size:"small",variant:"outlined",type:"text",value:n,onChange:function(e){c(e.target.value)}}),Object(g.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){r({name:n,createdAt:j()}),c("")},children:"Create"})]})},A=function(){return Object(g.jsxs)("nav",{className:"navbar",children:[Object(g.jsx)("h3",{children:"Person Index"}),Object(g.jsxs)("div",{className:"links",children:[Object(g.jsx)(f.b,{to:"/",children:"Home"}),Object(g.jsx)(f.b,{to:"/About",children:"About"})]})]})},D=function(){var e=u("persons"),t=e.error,n=e.isPending,a=e.data;return Object(g.jsxs)("div",{className:"home",children:[Object(g.jsx)("h1",{children:"Person Index"}),Object(g.jsx)(N,{}),Object(g.jsx)("br",{}),t&&Object(g.jsx)("div",{children:t}),n&&Object(g.jsx)("div",{children:"Loading..."}),a&&a.map((function(e){return Object(g.jsx)(S,{person:e})}))]})},k=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"This is an about page containing information about the page"}),Object(g.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam semper nulla in vulputate molestie. Ut at libero interdum, pellentesque arcu eget, porttitor sem. Vestibulum quis porta tellus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos."})]})},w=function(){return Object(g.jsxs)(f.a,{children:[Object(g.jsx)(A,{}),Object(g.jsx)("div",{className:"app",children:Object(g.jsx)("div",{className:"content",children:Object(g.jsxs)(v.c,{children:[Object(g.jsx)(v.a,{exact:!0,path:"/",children:Object(g.jsx)(D,{})}),Object(g.jsx)(v.a,{path:"/create",children:Object(g.jsx)(N,{})}),Object(g.jsx)(v.a,{path:"/about",children:Object(g.jsx)(k,{})}),Object(g.jsx)(v.a,{path:"/person/:id",children:Object(g.jsx)(y,{})})]})})})]})};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(w,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.7deca2b1.chunk.js.map